ace.define("ace/ext/whitespace",["require","exports","module","ace/lib/lang"],(function(e,t,n){"use strict";var r=e("../lib/lang");t.$detectIndentation=function(e,t){function n(e){var t,n=0;for(t=e;t<u.length;t+=e)n+=u[t]||0;return n}var r,o,i,s,c,a,g,l,h,u=[],d=[],f=0,p=0,m=Math.min(e.length,1e3);for(r=0;r<m;r++)if(o=e[r],/^\s*[^*+\-\s]/.test(o))for("\t"==o[0]?(f++,p=-Number.MAX_VALUE):((i=o.match(/^ */)[0].length)&&"\t"!=o[i]&&(!((s=i-p)>0)||p%s||i%s||(d[s]=(d[s]||0)+1),u[i]=(u[i]||0)+1),p=i);r<m&&"\\"==o[o.length-1];)o=e[r++];for(c=d.reduce((function(e,t){return e+t}),0),a={score:0,length:0},g=0,r=1;r<12;r++)l=n(r),1==r?(g=l,l=u[1]?.9:.8,u.length||(l=0)):l/=g,d[r]&&(l+=d[r]/c),l>a.score&&(a={score:l,length:r});return a.score&&a.score>1.4&&(h=a.length),f>g+1?((1==h||g<f/4||a.score<1.8)&&(h=void 0),{ch:"\t",length:h}):g>f+1?{ch:" ",length:h}:void 0},t.detectIndentation=function(e){var n=e.getLines(0,1e3),r=t.$detectIndentation(n)||{};return r.ch&&e.setUseSoftTabs(" "==r.ch),r.length&&e.setTabSize(r.length),r},t.trimTrailingSpace=function(e,t){var n,r,o,i,s,c=e.getDocument(),a=c.getAllLines(),g=t&&t.trimEmpty?-1:0,l=[],h=-1;for(t&&t.keepCursorPosition&&(e.selection.rangeCount?e.selection.rangeList.ranges.forEach((function(e,t,n){var r=n[t+1];r&&r.cursor.row==e.cursor.row||l.push(e.cursor)})):l.push(e.selection.getCursor()),h=0),n=l[h]&&l[h].row,r=0,o=a.length;r<o;r++)s=(i=a[r]).search(/\s+$/),r==n&&(s<l[h].column&&s>g&&(s=l[h].column),h++,n=l[h]?l[h].row:-1),s>g&&c.removeInLine(r,s,i.length)},t.convertIndentation=function(e,t,n){var o,i,s,c,a,g,l,h,u,d,f,p,m=e.getTabString()[0],v=e.getTabSize();for(n||(n=v),t||(t=m),o="\t"==t?t:r.stringRepeat(t,n),c={},a={},g=0,l=(s=(i=e.doc).getAllLines()).length;g<l;g++)(h=s[g].match(/^\s*/)[0])&&(f=(u=e.$getStringScreenWidth(h)[0])%v,p=c[d=Math.floor(u/v)]||(c[d]=r.stringRepeat(o,d)),(p+=a[f]||(a[f]=r.stringRepeat(" ",f)))!=h&&(i.removeInLine(g,0,h.length),i.insertInLine({row:g,column:0},p)));e.setTabSize(n),e.setUseSoftTabs(" "==t)},t.$parseStringArg=function(e){var t,n={};return/t/.test(e)?n.ch="\t":/s/.test(e)&&(n.ch=" "),(t=e.match(/\d+/))&&(n.length=parseInt(t[0],10)),n},t.$parseArg=function(e){return e?"string"==typeof e?t.$parseStringArg(e):"string"==typeof e.text?t.$parseStringArg(e.text):e:{}},t.commands=[{name:"detectIndentation",description:"Detect indentation from content",exec:function(e){t.detectIndentation(e.session)}},{name:"trimTrailingSpace",description:"Trim trailing whitespace",exec:function(e,n){t.trimTrailingSpace(e.session,n)}},{name:"convertIndentation",description:"Convert indentation to ...",exec:function(e,n){var r=t.$parseArg(n);t.convertIndentation(e.session,r.ch,r.length)}},{name:"setIndentation",description:"Set indentation",exec:function(e,n){var r=t.$parseArg(n);r.length&&e.session.setTabSize(r.length),r.ch&&e.session.setUseSoftTabs(" "==r.ch)}}]})),ace.require(["ace/ext/whitespace"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}));