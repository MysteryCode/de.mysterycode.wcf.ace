ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],(function(e,t,n){"use strict";function i(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}var r,o,s,a,c,p,u=e("./lib/dom"),h=e("./lib/oop"),l=e("./lib/event_emitter").EventEmitter,d=e("./lib/lang"),g=e("./range").Range,f=e("./range_list").RangeList,m=e("./keyboard/hash_handler").HashHandler,b=e("./tokenizer").Tokenizer,x=e("./clipboard"),y={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var i=e.session.getTextRange();return n?i.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):i},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return x.getText&&x.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:i.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:i.bind(null,{year:"2-digit"}),CURRENT_MONTH:i.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:i.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:i.bind(null,{month:"short"}),CURRENT_DATE:i.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:i.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:i.bind(null,{weekday:"short"}),CURRENT_HOUR:i.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:i.bind(null,{minute:"2-digit"}),CURRENT_SECOND:i.bind(null,{second:"2-digit"})};y.SELECTED_TEXT=y.SELECTION,r=function(){function e(){this.snippetMap={},this.snippetNameMap={},this.variables=y}return e.prototype.getTokenizer=function(){return e.$tokenizer||this.createTokenizer()},e.prototype.createTokenizer=function(){function t(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function n(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var i={regex:"/("+n("/")+"+)/",onMatch:function(e,t,n){var i=n[0];return i.fmtString=!0,i.guard=e.slice(1,-1),i.flag="",""},next:"formatString"};return e.$tokenizer=new b({start:[{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return("}"==i&&n.length||-1!="`$\\".indexOf(i))&&(e=i),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:t},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,n,i){var r=t(e.substr(1));return i.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+n("\\|")+"*\\|",onMatch:function(e,t,n){var i=e.slice(1,-1).replace(/\\[,|\\]|,/g,(function(e){return 2==e.length?e[1]:"\0"})).split("\0").map((function(e){return{value:e}}));return n[0].choices=i,[i[0]]},next:"start"},i,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return"}"==i&&n.length||-1!="`$\\".indexOf(i)?e=i:"n"==i?e="\n":"t"==i?e="\t":-1!="ulULE".indexOf(i)&&(e={changeCase:i,local:i>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var i=n.shift();return i&&(i.flag=e.slice(1,-1)),this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var i={text:e.slice(2)};return n.unshift(i),[i]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var i=n.shift();return this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},i,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),e.$tokenizer},e.prototype.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map((function(e){return e.value||e}))},e.prototype.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var i=this.variables[t];return"function"==typeof i&&(i=this.variables[t](e,t,n)),null==i?"":i},e.prototype.tmStrFormat=function(e,t,n){var i,r,o,s,a;return t.fmt?(i=t.flag||"",r=t.guard,r=new RegExp(r,i.replace(/[^gim]/g,"")),o="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,s=this,a=e.replace(r,(function(){var e,t,i,r,a,c=s.variables.__;for(s.variables.__=[].slice.call(arguments),e=s.resolveVariables(o,n),t="E",i=0;i<e.length;i++)"object"==typeof(r=e[i])?(e[i]="",r.changeCase&&r.local?(a=e[i+1])&&"string"==typeof a&&("u"==r.changeCase?e[i]=a[0].toUpperCase():e[i]=a[0].toLowerCase(),e[i+1]=a.substr(1)):r.changeCase&&(t=r.changeCase)):"U"==t?e[i]=r.toUpperCase():"L"==t&&(e[i]=r.toLowerCase());return s.variables.__=c,e.join("")})),a):e},e.prototype.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},e.prototype.resolveVariables=function(e,t){function n(t){var n=e.indexOf(t,i+1);-1!=n&&(i=n)}var i,r,o,s,a=[],c="",p=!0;for(i=0;i<e.length;i++)"string"!=typeof(r=e[i])?r&&(p=!1,r.fmtString&&(-1==(o=e.indexOf(r,i+1))&&(o=e.length),r.fmt=e.slice(i+1,o),i=o),r.text?(s=this.getVariableValue(t,r.text,c)+"",r.fmtString&&(s=this.tmStrFormat(s,r,t)),r.formatFunction&&(s=this.tmFormatFunction(s,r,t)),s&&!r.ifEnd?(a.push(s),n(r)):!s&&r.ifEnd&&n(r.ifEnd)):r.elseEnd?n(r.elseEnd):(null!=r.tabstopId||null!=r.changeCase)&&a.push(r)):(a.push(r),"\n"==r?(p=!0,c=""):p&&(c=/^\t*/.exec(r)[0],p=/\S/.test(r)));return a},e.prototype.getDisplayTextForSnippet=function(e,t){return o.call(this,e,t).text},e.prototype.insertSnippetForSelection=function(e,t,n){var i,r,a,c,p;void 0===n&&(n={}),i=o.call(this,e,t,n),r=e.getSelectionRange(),a=e.session.replace(r,i.text),c=new s(e),p=e.inVirtualSelectionMode&&e.selection.index,c.addTabstops(i.tabstops,r.start,a,p)},e.prototype.insertSnippet=function(e,t,n){void 0===n&&(n={});var i=this;if(e.inVirtualSelectionMode)return i.insertSnippetForSelection(e,t,n);e.forEachSelection((function(){i.insertSnippetForSelection(e,t,n)}),null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},e.prototype.$getScope=function(e){var t,n,i=e.session.$mode.$id||"";return"html"!==(i=i.split("/").pop())&&"php"!==i||("php"!==i||e.session.$mode.inlinePhp||(i="html"),t=e.getCursorPosition(),"object"==typeof(n=e.session.getState(t.row))&&(n=n[0]),n.substring&&("js-"==n.substring(0,3)?i="javascript":"css-"==n.substring(0,4)?i="css":"php-"==n.substring(0,4)&&(i="php"))),i},e.prototype.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],i=this.snippetMap;return i[t]&&i[t].includeScopes&&n.push.apply(n,i[t].includeScopes),n.push("_"),n},e.prototype.expandWithTab=function(e,t){var n=this,i=e.forEachSelection((function(){return n.expandSnippetForSelection(e,t)}),null,{keepOrder:!0});return i&&e.tabstopManager&&e.tabstopManager.tabNext(),i},e.prototype.expandSnippetForSelection=function(e,t){var n,i=e.getCursorPosition(),r=e.session.getLine(i.row),o=r.substring(0,i.column),s=r.substr(i.column),a=this.snippetMap;return this.getActiveScopes(e).some((function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,o,s)),!!n}),this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(i.row,i.column-n.replaceBefore.length,i.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},e.prototype.findMatchingSnippet=function(e,t,n){var i,r;for(i=e.length;i--;)if((!(r=e[i]).startRe||r.startRe.test(t))&&(!r.endRe||r.endRe.test(n))&&(r.startRe||r.endRe))return r.matchBefore=r.startRe?r.startRe.exec(t):[""],r.matchAfter=r.endRe?r.endRe.exec(n):[""],r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"",r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(n)[0]:"",r},e.prototype.register=function(e,t){function n(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function i(e,t,i){return e=n(e),t=n(t),i?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function r(e){var n,r;e.scope||(e.scope=t||"_"),t=e.scope,o[t]||(o[t]=[],s[t]={}),n=s[t],e.name&&((r=n[e.name])&&a.unregister(r),n[e.name]=e),o[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=d.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=i(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=i(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}var o=this.snippetMap,s=this.snippetNameMap,a=this;e||(e=[]),Array.isArray(e)?e.forEach(r):Object.keys(e).forEach((function(t){r(e[t])})),this._signal("registerSnippets",{scope:t})},e.prototype.unregister=function(e,t){function n(e){var n,o,s=r[e.scope||t];s&&s[e.name]&&(delete s[e.name],(o=(n=i[e.scope||t])&&n.indexOf(e))>=0&&n.splice(o,1))}var i=this.snippetMap,r=this.snippetNameMap;e.content?n(e):Array.isArray(e)&&e.forEach(n)},e.prototype.parseSnippetFile=function(e){var t,n,i,r,o,s,a;for(e=e.replace(/\r/g,""),t=[],n={},i=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;r=i.exec(e);){if(r[1])try{n=JSON.parse(r[1]),t.push(n)}catch(e){}r[4]?(n.content=r[4].replace(/^\t/gm,""),t.push(n),n={}):(o=r[2],s=r[3],"regex"==o?(a=/\/((?:[^\/\\]|\\.)*)|$/g,n.guard=a.exec(s)[1],n.trigger=a.exec(s)[1],n.endTrigger=a.exec(s)[1],n.endGuard=a.exec(s)[1]):"snippet"==o?(n.tabTrigger=s.match(/^\S*/)[0],n.name||(n.name=s)):o&&(n[o]=s))}return t},e.prototype.getSnippetByName=function(e,t){var n,i=this.snippetNameMap;return this.getActiveScopes(t).some((function(t){var r=i[t];return r&&(n=r[e]),!!n}),this),n},e}(),h.implement(r.prototype,l),o=function(e,t,n){function i(e){var t,n,i=[];for(t=0;t<e.length;t++){if("object"==typeof(n=e[t])){if(u[n.tabstopId])continue;n=i[e.lastIndexOf(n,t-1)]||{tabstopId:n.tabstopId}}i[t]=n}return i}var r,o,s,a,c,p,u,h,l,d,g,f,m,b,x,y;for(void 0===n&&(n={}),r=e.getCursorPosition(),o=e.session.getLine(r.row),s=e.session.getTabString(),a=o.match(/^\s*/)[0],r.column<a.length&&(a=a.slice(0,r.column)),t=t.replace(/\r/g,""),c=this.tokenizeTmSnippet(t),c=(c=this.resolveVariables(c,e)).map((function(e){return"\n"!=e||n.excludeExtraIndent?"string"==typeof e?e.replace(/\t/g,s):e:e+a})),p=[],c.forEach((function(e,t){var n,i,r,o;"object"==typeof e&&(n=e.tabstopId,(i=p[n])||((i=p[n]=[]).index=n,i.value="",i.parents={}),-1===i.indexOf(e)&&(e.choices&&!i.choices&&(i.choices=e.choices),i.push(e),-1!==(r=c.indexOf(e,t+1))&&((o=c.slice(t+1,r)).some((function(e){return"object"==typeof e}))&&!i.value?i.value=o:!o.length||i.value&&"string"==typeof i.value||(i.value=o.join("")))))})),p.forEach((function(e){e.length=0})),u={},h=0;h<c.length;h++)"object"==typeof(l=c[h])&&(d=l.tabstopId,g=p[d],f=c.indexOf(l,h+1),u[d]?u[d]===l&&(delete u[d],Object.keys(u).forEach((function(e){g.parents[e]=!0}))):(u[d]=l,"string"!=typeof(m=g.value)?m=i(m):l.fmt&&(m=this.tmStrFormat(m,l,e)),c.splice.apply(c,[h+1,Math.max(0,f-h)].concat(m,l)),-1===g.indexOf(l)&&g.push(l)));return b=0,x=0,y="",c.forEach((function(e){if("string"==typeof e){var t=e.split("\n");t.length>1?(x=t[t.length-1].length,b+=t.length-1):x+=e.length,y+=e}else e&&(e.start?e.end={row:b,column:x}:e.start={row:b,column:x})})),{text:y,tabstops:p,tokens:c}},(s=function(){function e(e){if(this.index=0,this.ranges=[],this.tabstops=[],e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=d.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)}return e.prototype.attach=function(e){this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.session=e.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},e.prototype.onChange=function(e){var t,n,i,r,o,s,a,c,p,u="r"==e.action[0],h=this.selectedTabstop||{},l=h.parents||{},d=this.tabstops.slice();for(t=0;t<d.length;t++){if(i=(n=d[t])==h||l[n.index],n.rangeList.$bias=i?0:1,"remove"==e.action&&n!==h)for(r=n.parents&&n.parents[h.index],o=(o=n.rangeList.pointIndex(e.start,r))<0?-o-1:o+1,s=(s=n.rangeList.pointIndex(e.end,r))<0?-s-1:s-1,a=n.rangeList.ranges.slice(o,s),c=0;c<a.length;c++)this.removeRange(a[c]);n.rangeList.$onChange(e)}p=this.session,this.$inChange||!u||1!=p.getLength()||p.getValue()||this.detach()},e.prototype.updateLinkedFields=function(){var e,n,i,r,o,s,a=this.selectedTabstop;if(a&&a.hasLinkedRanges&&a.firstNonLinked){for(this.$inChange=!0,n=(e=this.session).getTextRange(a.firstNonLinked),i=0;i<a.length;i++)(r=a[i]).linked&&(o=r.original,s=t.snippetManager.tmStrFormat(n,o,this.editor),e.replace(r,s));this.$inChange=!1}},e.prototype.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},e.prototype.onChangeSelection=function(){var e,t,n,i,r,o;if(this.editor){for(e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),i=0;i<this.ranges.length;i++)if(!this.ranges[i].linked&&(r=this.ranges[i].contains(e.row,e.column),o=n||this.ranges[i].contains(t.row,t.column),r&&o))return;this.detach()}},e.prototype.onChangeSession=function(){this.detach()},e.prototype.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),this.updateTabstopMarkers(),0===n&&this.detach()},e.prototype.selectTabstop=function(e){var t,n,i,r;if(this.$openTabstops=null,(t=this.tabstops[this.index])&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){if(this.selectedTabstop=t,n=t.firstNonLinked||t,t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else for((i=this.editor.multiSelect).toSingleRange(n),r=0;r<t.length;r++)t.hasLinkedRanges&&t[r].linked||i.addRange(t[r].clone(),!0);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},e.prototype.addTabstops=function(e,t,n){var i,r,o,s,p,u=this.useLink||!this.editor.getOption("enableMultiselect");this.$openTabstops||(this.$openTabstops=[]),e[0]||(i=g.fromPoints(n,n),c(i.start,t),c(i.end,t),e[0]=[i],e[0].index=0),r=this.index,o=[r+1,0],s=this.ranges,p=this.snippetId=(this.snippetId||0)+1,e.forEach((function(e,n){var i,r,c,h=this.$openTabstops[n]||e;for(h.snippetId=p,i=0;i<e.length;i++)r=e[i],c=g.fromPoints(r.start,r.end||r.start),a(c.start,t),a(c.end,t),c.original=r,c.tabstop=h,s.push(c),h!=e?h.unshift(c):h[i]=c,r.fmtString||h.firstNonLinked&&u?(c.linked=!0,h.hasLinkedRanges=!0):h.firstNonLinked||(h.firstNonLinked=c);h.firstNonLinked||(h.hasLinkedRanges=!1),h===e&&(o.push(h),this.$openTabstops[n]=h),this.addTabstopMarkers(h),h.rangeList=h.rangeList||new f,h.rangeList.$bias=0,h.rangeList.addList(h)}),this),o.length>2&&(this.tabstops.length&&o.push(o.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,o))},e.prototype.addTabstopMarkers=function(e){var t=this.session;e.forEach((function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))}))},e.prototype.removeTabstopMarkers=function(e){var t=this.session;e.forEach((function(e){t.removeMarker(e.markerId),e.markerId=null}))},e.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var e=this.selectedTabstop.snippetId;0===this.selectedTabstop.index&&e--,this.tabstops.forEach((function(t){t.snippetId===e?this.addTabstopMarkers(t):this.removeTabstopMarkers(t)}),this)}},e.prototype.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},e}()).prototype.keyboardHandler=new m,s.prototype.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}}),a=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},c=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row},u.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),t.snippetManager=new r,p=e("./editor").Editor,function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}.call(p.prototype)})),ace.define("ace/ext/emmet",["require","exports","module","ace/keyboard/hash_handler","ace/editor","ace/snippets","ace/range","ace/config","resources","resources","tabStops","resources","utils","actions"],(function(e,t,n){"use strict";var i,r,o,s,a=e("../keyboard/hash_handler").HashHandler,c=e("../editor").Editor,p=e("../snippets").snippetManager,u=e("../range").Range,h=e("../config"),l=function(){function e(){}return e.prototype.setupContext=function(e){this.ace=e,this.indentation=e.session.getTabString(),i||(i=window.emmet),(i.resources||i.require("resources")).setVariable("indentation",this.indentation),this.$syntax=null,this.$syntax=this.getSyntax()},e.prototype.getSelectionRange=function(){var e=this.ace.getSelectionRange(),t=this.ace.session.doc;return{start:t.positionToIndex(e.start),end:t.positionToIndex(e.end)}},e.prototype.createSelection=function(e,t){var n=this.ace.session.doc;this.ace.selection.setRange({start:n.indexToPosition(e),end:n.indexToPosition(t)})},e.prototype.getCurrentLineRange=function(){var e=this.ace,t=e.getCursorPosition().row,n=e.session.getLine(t).length,i=e.session.doc.positionToIndex({row:t,column:0});return{start:i,end:i+n}},e.prototype.getCaretPos=function(){var e=this.ace.getCursorPosition();return this.ace.session.doc.positionToIndex(e)},e.prototype.setCaretPos=function(e){var t=this.ace.session.doc.indexToPosition(e);this.ace.selection.moveToPosition(t)},e.prototype.getCurrentLine=function(){var e=this.ace.getCursorPosition().row;return this.ace.session.getLine(e)},e.prototype.replaceContent=function(e,t,n,i){var r,o,s;null==n&&(n=null==t?this.getContent().length:t),null==t&&(t=0),o=(r=this.ace).session.doc,s=u.fromPoints(o.indexToPosition(t),o.indexToPosition(n)),r.session.remove(s),s.end=s.start,e=this.$updateTabstops(e),p.insertSnippet(r,e)},e.prototype.getContent=function(){return this.ace.getValue()},e.prototype.getSyntax=function(){var e,t,n;return this.$syntax?this.$syntax:("html"!=(e=this.ace.session.$modeId.split("/").pop())&&"php"!=e||(t=this.ace.getCursorPosition(),"string"!=typeof(n=this.ace.session.getState(t.row))&&(n=n[0]),n&&((n=n.split("-")).length>1?e=n[0]:"php"==e&&(e="html"))),e)},e.prototype.getProfileName=function(){var e,t,n=i.resources||i.require("resources");switch(this.getSyntax()){case"css":return"css";case"xml":case"xsl":return"xml";case"html":return(e=n.getVariable("profile"))||(e=-1!=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)?"xhtml":"html"),e;default:return(t=this.ace.session.$mode).emmetConfig&&t.emmetConfig.profile||"xhtml"}},e.prototype.prompt=function(e){return prompt(e)},e.prototype.getSelection=function(){return this.ace.session.getTextRange()},e.prototype.getFilePath=function(){return""},e.prototype.$updateTabstops=function(e){var t=1e3,n=0,r=null,o=i.tabStops||i.require("tabStops"),s=i.resources||i.require("resources"),a=s.getVocabulary("user"),c={tabstop:function(e){var i,s,a=parseInt(e.group,10),p=0===a;return p?a=++n:a+=t,(i=e.placeholder)&&(i=o.processText(i,c)),s="${"+a+(i?":"+i:"")+"}",p&&(r=[e.start,s]),s},escape:function(e){return"$"==e?"\\$":"\\"==e?"\\\\":e}};return e=o.processText(e,c),a.variables.insert_final_tabstop&&!/\$\{0\}$/.test(e)?e+="${0}":r&&(e=(i.utils?i.utils.common:i.require("utils")).replaceSubstring(e,"${0}",r[0],r[1])),e},e}(),d={expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}},g=new l;for(o in t.commands=new a,t.runEmmetCommand=function e(n){var r,o,s,a,c;if("expand_abbreviation_with_tab"==this.action){if(!n.selection.isEmpty())return!1;if(r=n.selection.lead,(o=n.session.getTokenAt(r.row,r.column))&&/\btag\b/.test(o.type))return!1}try{if(g.setupContext(n),s=i.actions||i.require("actions"),"wrap_with_abbreviation"==this.action)return setTimeout((function(){s.run("wrap_with_abbreviation",g)}),0);a=s.run(this.action,g)}catch(r){if(!i)return c=t.load(e.bind(this,n)),"expand_abbreviation_with_tab"!=this.action&&c;n._signal("changeStatus","string"==typeof r?r:r.message),h.warn(r),a=!1}return a},d)t.commands.addCommand({name:"emmet:"+o,action:o,bindKey:d[o],exec:t.runEmmetCommand,multiSelectAction:"forEach"});t.updateCommands=function(e,n){n?e.keyBinding.addKeyboardHandler(t.commands):e.keyBinding.removeKeyboardHandler(t.commands)},t.isSupportedMode=function(e){if(!e)return!1;if(e.emmetConfig)return!0;var t=e.$id||e;return/css|less|scss|sass|stylus|html|php|twig|ejs|handlebars/.test(t)},t.isAvailable=function(e,n){var i,r;if(/(evaluate_math_expression|expand_abbreviation)$/.test(n))return!0;if(i=e.session.$mode,(r=t.isSupportedMode(i))&&i.$modes)try{g.setupContext(e),/js|php/.test(g.getSyntax())&&(r=!1)}catch(e){}return r},s=function(e,n){var i,r=n;r&&(i=t.isSupportedMode(r.session.$mode),!1===e.enableEmmet&&(i=!1),i&&t.load(),t.updateCommands(r,i))},t.load=function(e){return"string"!=typeof r?(h.warn("script for emmet-core is not loaded"),!1):(h.loadModule(r,(function(){r=null,e&&e()})),!0)},t.AceEmmetEditor=l,h.defineOptions(c.prototype,"editor",{enableEmmet:{set:function(e){this[e?"on":"removeListener"]("changeMode",s),s({enableEmmet:!!e},this)},value:!0}}),t.setCore=function(e){"string"==typeof e?r=e:i=e}})),ace.require(["ace/ext/emmet"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}));