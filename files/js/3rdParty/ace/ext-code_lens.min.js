ace.define("ace/ext/code_lens",["require","exports","module","ace/line_widgets","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/editor","ace/config"],(function(e,n,o){"use strict";function t(e,n){var o,t,i,s,r,a,c,l,u,f,g,p,L,h,m,v,C,$,w=e&n.CHANGE_LINES||e&n.CHANGE_FULL||e&n.CHANGE_SCROLL||e&n.CHANGE_TEXT;if(w)if(o=n.session,t=n.session.lineWidgets,s=(i=n.$textLayer).$lenses,t){for(r=n.$textLayer.$lines.cells,a=n.layerConfig,c=n.$padding,s||(s=i.$lenses=[]),l=0,u=0;u<r.length;u++)if((p=(g=t[f=r[u].row])&&g.lenses)&&p.length){for((L=s[l])||(L=s[l]=d.buildDom(["div",{class:"ace_codeLens"}],n.container)),L.style.height=a.lineHeight+"px",l++,h=0;h<p.length;h++)(m=L.childNodes[2*h])||(0!=h&&L.appendChild(d.createTextNode(" | ")),m=d.buildDom(["a"],L)),m.textContent=p[h].title,m.lensCommand=p[h];for(;L.childNodes.length>2*h-1;)L.lastChild.remove();v=n.$cursorLayer.getPixelPosition({row:f,column:0},!0).top-a.lineHeight*g.rowsAbove-a.offset,L.style.top=v+"px",C=n.gutterWidth,-1==($=o.getLine(f).search(/\S|$/))&&($=0),C+=$*a.characterWidth,L.style.paddingLeft=c+C+"px"}for(;l<s.length;)s.pop().remove()}else s&&function(e){var n=e.$textLayer,o=n.$lenses;o&&o.forEach((function(e){e.remove()})),n.$lenses=null}(n)}function i(e){e.codeLensProviders=[],e.renderer.on("afterRender",t),e.$codeLensClickHandler||(e.$codeLensClickHandler=function(n){var o=n.target.lensCommand;o&&(e.execCommand(o.id,o.arguments),e._emit("codeLensClick",n))},a.addListener(e.container,"click",e.$codeLensClickHandler,e)),e.$updateLenses=function(){var o,t,i=e.session;i&&(i.widgetManager||(i.widgetManager=new r(i),i.widgetManager.attach(e)),o=e.codeLensProviders.length,t=[],e.codeLensProviders.forEach((function(s){s.provideCodeLenses(i,(function(s,r){var a,c,d,l,u,f,g,p;s||(r.forEach((function(e){t.push(e)})),0==--o&&(l=i.selection.cursor,u=i.documentToScreenRow(l),f=i.getScrollTop(),g=n.setLenses(i,t),(p=i.$undoManager&&i.$undoManager.$lastDelta)&&"remove"==p.action&&p.lines.length>1||(a=i.documentToScreenRow(l),c=e.renderer.layerConfig.lineHeight,d=i.getScrollTop()+(a-u)*c,0==g&&f<c/4&&f>-c/4&&(d=-c),i.setScrollTop(d))))}))})))};var o=c.delayedCall(e.$updateLenses);e.$updateLensesOnInput=function(){o.delay(250)},e.on("input",e.$updateLensesOnInput)}var s,r=e("../line_widgets").LineWidgets,a=e("../lib/event"),c=e("../lib/lang"),d=e("../lib/dom");n.setLenses=function(e,n){var o=Number.MAX_VALUE;return function(e){if(e.lineWidgets){var n=e.widgetManager;e.lineWidgets.forEach((function(e){e&&e.lenses&&n.removeLineWidget(e)}))}}(e),n&&n.forEach((function(n){var t=n.start.row,i=n.start.column,s=e.lineWidgets&&e.lineWidgets[t];s&&s.lenses||(s=e.widgetManager.$registerLineWidget({rowCount:1,rowsAbove:1,row:t,column:i,lenses:[]})),s.lenses.push(n.command),t<o&&(o=t)})),e._emit("changeFold",{data:{start:{row:o}}}),o},n.registerCodeLensProvider=function(e,n){e.setOption("enableCodeLens",!0),e.codeLensProviders.push(n),e.$updateLensesOnInput()},n.clear=function(e){n.setLenses(e,null)},s=e("../editor").Editor,e("../config").defineOptions(s.prototype,"editor",{enableCodeLens:{set:function(e){var n;e?i(this):((n=this).off("input",n.$updateLensesOnInput),n.renderer.off("afterRender",t),n.$codeLensClickHandler&&n.container.removeEventListener("click",n.$codeLensClickHandler))}}}),d.importCssString("\n.ace_codeLens {\n    position: absolute;\n    color: #aaa;\n    font-size: 88%;\n    background: inherit;\n    width: 100%;\n    display: flex;\n    align-items: flex-end;\n    pointer-events: none;\n}\n.ace_codeLens > a {\n    cursor: pointer;\n    pointer-events: auto;\n}\n.ace_codeLens > a:hover {\n    color: #0000ff;\n    text-decoration: underline;\n}\n.ace_dark > .ace_codeLens > a:hover {\n    color: #4e94ce;\n}\n","codelense.css",!1)})),ace.require(["ace/ext/code_lens"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}));